<svg width="1200" height="560" viewBox="0 0 1200 560" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1200" height="560" rx="24" fill="#0F172A"/>
  <text x="600" y="82" fill="#E2E8F0" font-size="40" font-family="Inter, Arial, sans-serif" text-anchor="middle" font-weight="700">Write-Ahead Logging (WAL) Flow</text>
  <text x="600" y="118" fill="#94A3B8" font-size="20" font-family="Inter, Arial, sans-serif" text-anchor="middle">Atomicity + Durability through ordered persistence</text>

  <rect x="70" y="190" width="240" height="180" rx="14" fill="#1E293B" stroke="#3B82F6" stroke-width="2"/>
  <text x="190" y="240" fill="#E2E8F0" font-size="23" font-family="Inter, Arial, sans-serif" text-anchor="middle" font-weight="700">1) Receive</text>
  <text x="190" y="272" fill="#94A3B8" font-size="18" font-family="Inter, Arial, sans-serif" text-anchor="middle">transaction</text>

  <rect x="360" y="190" width="240" height="180" rx="14" fill="#1E293B" stroke="#06B6D4" stroke-width="2"/>
  <text x="480" y="240" fill="#E2E8F0" font-size="23" font-family="Inter, Arial, sans-serif" text-anchor="middle" font-weight="700">2) Write to WAL</text>
  <text x="480" y="272" fill="#94A3B8" font-size="18" font-family="Inter, Arial, sans-serif" text-anchor="middle">append log record</text>

  <rect x="650" y="190" width="240" height="180" rx="14" fill="#1E293B" stroke="#8B5CF6" stroke-width="2"/>
  <text x="770" y="240" fill="#E2E8F0" font-size="23" font-family="Inter, Arial, sans-serif" text-anchor="middle" font-weight="700">3) fsync WAL</text>
  <text x="770" y="272" fill="#94A3B8" font-size="18" font-family="Inter, Arial, sans-serif" text-anchor="middle">force to disk</text>

  <rect x="940" y="190" width="190" height="180" rx="14" fill="#1E293B" stroke="#3B82F6" stroke-width="2"/>
  <text x="1035" y="240" fill="#E2E8F0" font-size="23" font-family="Inter, Arial, sans-serif" text-anchor="middle" font-weight="700">4) Apply</text>
  <text x="1035" y="272" fill="#94A3B8" font-size="18" font-family="Inter, Arial, sans-serif" text-anchor="middle">data files</text>

  <path d="M310 280H350" stroke="#60A5FA" stroke-width="4"/>
  <path d="M600 280H640" stroke="#22D3EE" stroke-width="4"/>
  <path d="M890 280H930" stroke="#A78BFA" stroke-width="4"/>

  <polygon points="350,280 336,272 336,288" fill="#60A5FA"/>
  <polygon points="640,280 626,272 626,288" fill="#22D3EE"/>
  <polygon points="930,280 916,272 916,288" fill="#A78BFA"/>

  <rect x="160" y="420" width="880" height="82" rx="12" fill="#111827" stroke="#334155"/>
  <text x="600" y="455" fill="#E2E8F0" font-size="22" font-family="Inter, Arial, sans-serif" text-anchor="middle" font-weight="600">Crash Recovery: replay WAL to restore committed state</text>
  <text x="600" y="482" fill="#94A3B8" font-size="18" font-family="Inter, Arial, sans-serif" text-anchor="middle">No partial writes · No lost commits · Deterministic recovery</text>
</svg>
